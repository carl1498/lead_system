!function(t){var e={};function a(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/",a(a.s=14)}({14:function(t,e,a){t.exports=a("1l0Y")},"1l0Y":function(t,e){$(document).ready(function(){var t,e="Student",a=!1,n=!1;function s(){$("#add_student_form :input.required").each(function(){this.style.setProperty("border-color","green","important")}),$("#add_student_form").find("input,textarea,select").val("").end(),$(".select2").trigger("change.select2")}function o(){$("#tf_sb_payment_form :input.required").each(function(){this.style.setProperty("border-color","green","important")}),$("#tf_sb_payment_form").find("input,textarea,select").val("").end(),$(".select2").trigger("change.select2"),$("#p_student").attr("disabled",!1),$("#sign_up_check").prop("checked",!1).attr("disabled",!0),$("#sign_up").val(0)}function r(){$("li.student_pick, li.tuition_sec_pick, li.program_pick, li.tf_breakdown_pick").removeClass("disabled").css("cursor","pointer"),$("a.student_pick, a.tuition_sec_pick, a.program_pick, a.tf_breakdown_pick").removeClass("disabled").css("pointer-events","auto"),$(".refresh_table").attr("disabled",!1)}function l(){$("li.student_pick, li.tuition_sec_pick, li.program_pick, li.tf_breakdown_pick").addClass("disabled").css("cursor","not-allowed"),$("a.student_pick, a.tuition_sec_pick, a.program_pick, a.tf_breakdown_pick").addClass("disabled").css("pointer-events","none"),$(".refresh_table").attr("disabled",!0),"Student"==e?(class_select=$("#class_select").val(),program_select=$("#program_select").val(),branch_select=$("#branch_select").val(),departure_year_select=$("#departure_year_select").val(),departure_month_select=$("#departure_month_select").val(),$("#student_table").DataTable({initComplete:function(t,e){r()},processing:!0,destroy:!0,scrollX:!0,scrollCollapse:!0,fixedColumns:!0,responsive:!0,ajax:{url:"/view_tf_student",data:{class_select:class_select,program_select:program_select,branch_select:branch_select,departure_year_select:departure_year_select,departure_month_select:departure_month_select}},columns:[{data:"name",name:"name"},{data:"student.program.name",name:"program"},{data:"student.branch.name",name:"branch"},{data:"student.contact",name:"contact"},{data:"balance",name:"balance"},{data:"sec_bond",name:"sec_bond"},{data:"class",name:"class"},{data:"student.status",name:"status"},{data:"departure",name:"departure"},{data:"action",orderable:!1,searchable:!1}],columnDefs:[{defaultContent:"",targets:"_all"},{className:"text-right",targets:[4,5]}],footerCallback:function(t,e,a,n,s){var o=this.api(),r=function(t){return"string"==typeof t?1*t.replace(/[\$,]/g,""):"number"==typeof t?t:0};total=o.column(4).data().reduce(function(t,e){return r(t)+r(e)},0),total2=o.column(5).data().reduce(function(t,e){return r(t)+r(e)},0),$(o.column(4).footer()).html("₱"+total.toFixed(2)),$(o.column(5).footer()).html("₱"+total2.toFixed(2))}})):"Programs"==e?$("#program_table").DataTable({initComplete:function(t,e){r()},processing:!0,destroy:!0,scrollCollapse:!0,responsive:!0,ajax:{url:"/view_tf_program",data:{}},columns:[{data:"name",name:"name"},{data:"total",name:"total"},{data:"action",orderable:!1,searchable:!1}],columnDefs:[{defaultContent:"",targets:"_all"},{className:"text-right",targets:[1]}]}):"TF Breakdown"==e?(class_select=$("#class_select").val(),program_select=$("#program_select").val(),branch_select=$("#branch_select").val(),departure_year_select=$("#departure_year_select").val(),departure_month_select=$("#departure_month_select").val(),$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/view_tf_breakdown",data:{class_select:class_select,program_select:program_select,branch_select:branch_select,departure_year_select:departure_year_select,departure_month_select:departure_month_select},method:"get",dataType:"json",success:function(t){$("#tf_breakdown_table").empty();var e="",a="",n="";e+="<thead>";for(var s=0;s<t.installment;s++)a+='<th colspan="2" class="installments">Installment '+(s+1)+"</th>",n+="<th>Amount Paid</th><th>Payment Date</th>";e+='\n                <tr>\n                    <th rowspan="2" style="width: 300px;">Name</th>\n                    <th rowspan="2" style="width: 150px;">Program</th>\n                    <th colspan="2" style="width: 250px;">Prof Fee</th>\n                    <th rowspan="2" style="width: 150px;">Total Tuition</th>\n                    <th rowspan="2" style="width: 150px;">Total Payment</th>'+a+'<th rowspan="2" style="width: 100px;">Balance</th>\n                </tr>\n                <tr>'+(n+="<th>Amount Paid</th><th>Payment Date</th>"),e+="</thead>",e+="<tbody>";for(var o=0;o<t.tf_student.length;o++){for(var l=t.tf_student[o].student.mname?t.tf_student[o].student.mname:"",d="",c=0;c<t.installment;c++){var i=0,_="";t.tf_student[o].payment[c]&&(i=t.tf_student[o].payment[c].amount,_=t.tf_student[o].payment[c].date),d+='<td style="text-align:right;">'+i+'</td><td style="text-align:center;">'+_+"</td>"}e+="<tr>\n                        <td>"+t.tf_student[o].student.lname+", "+t.tf_student[o].student.fname+" "+l+"</td><td>"+t.tf_student[o].student.program.name+'</td><td style="text-align:right;">'+t.tf_student[o].prof_fee+'</td><td style="text-align:center;">'+t.tf_student[o].prof_fee_date+'</td><td style="text-align:right;">'+t.tf_student[o].balance+'</td><td style="text-align:right;">'+t.tf_student[o].total_payment+"</td>"+d+'<td style="text-align:right;">'+t.tf_student[o].remaining_bal+"</td></tr>"}e+="</tbody>",e+="<tfoot>";for(var u="",m=0;m<t.installment;m++)u+='<td style="text-align:right;">'+t.footer.installment[m]+"</td><td></td>";e+='<tr>\n                    <td style="text-align:center;" colspan="2">TOTAL</td>\n                    <td style="text-align:right;">'+t.footer.sign_up+'</td>\n                    <td></td>\n                    <td style="text-align:right;">'+t.footer.total_tuition+'</td>\n                    <td style="text-align:right;">'+t.footer.total_payment+"</td>"+u+'<td style="text-align:right;">'+t.footer.balance+"</td>",e+="</tfoot>",$("#tf_breakdown_table").append(e),r()}})):(class_select=$("#class_select").val(),program_select=$("#program_select").val(),branch_select=$("#branch_select").val(),departure_year_select=$("#departure_year_select").val(),departure_month_select=$("#departure_month_select").val(),$("#tuition_sec_table").DataTable({initComplete:function(t,e){r()},processing:!0,destroy:!0,scrollX:!0,scrollCollapse:!0,responsive:!0,ajax:{url:"/view_tuition_sec",data:{current_tab:e,class_select:class_select,program_select:program_select,branch_select:branch_select,departure_year_select:departure_year_select,departure_month_select:departure_month_select}},columns:[{data:"name",name:"name"},{data:"student.student.program.name",name:"program"},{data:"student.student.branch.name",name:"branch"},{data:"amount",name:"amount"},{data:"date",name:"date"},{data:"remarks",name:"remarks"},{data:"action",orderable:!1,searchable:!1}],columnDefs:[{defaultContent:"",targets:"_all"},{className:"text-right",targets:[3]}],order:[4,"desc"],footerCallback:function(t,e,a,n,s){var o=this.api(),r=function(t){return"string"==typeof t?1*t.replace(/[\$,]/g,""):"number"==typeof t?t:0};total=o.column(3).data().reduce(function(t,e){return r(t)+r(e)},0),$(o.column(3).footer()).html("₱"+total.toFixed(2))}})),setTimeout(function(){$.fn.dataTable.tables({visible:!0,api:!0}).columns.adjust()},1e3)}function d(t){$("#tuition_fee_table").DataTable({paging:!1,info:!1,searching:!1,processing:!0,destroy:!0,scrollCollapse:!0,responsive:!0,ajax:{url:"/view_tuition_fee/"+t,data:{}},columns:[{data:"amount",name:"amount"},{data:"date",name:"date"},{data:"remarks",name:"remarks"},{data:"action",orderable:!1,searchable:!1}],columnDefs:[{defaultContent:"",targets:"_all"},{className:"text-right",targets:[0]}],order:[1,"desc"]}),$("#sec_bond_table").DataTable({paging:!1,info:!1,searching:!1,processing:!0,destroy:!0,scrollCollapse:!0,responsive:!0,ajax:{url:"/view_sec_bond/"+t,data:{}},columns:[{data:"amount",name:"amount"},{data:"date",name:"date"},{data:"remarks",name:"remarks"},{data:"action",orderable:!1,searchable:!1}],columnDefs:[{defaultContent:"",targets:"_all"},{className:"text-right",targets:[0]}],order:[1,"desc"]})}function c(t,e,a){$.ajax({url:"/get_tf_sb_payment",data:{id:t,p_type:e},method:"get",dataType:"json",success:function(t){$("#p_id").val(t.id),$("#p_student").attr("disabled",!0),$("#p_student").val(t.tf_stud_id).trigger("change"),$("#p_amount, #p_prev_amount").val(t.amount).trigger("change"),$("#date").val(t.date),$("#remarks").val(t.remarks),1==t.sign_up?($("#sign_up_check").attr("disabled",!1).prop("checked",!0),$("#sign_up").val(1)):$("#sign_up").val(0)}}),i("edit",e,a)}function i(t,e,s){$("#tf_sb_payment_modal .modal-title").text(s),$("#add_edit").val(t),$("#p_type").val(e),1==a?(n=!0,$("#student_tuition_modal").modal("hide"),setTimeout(function(){$("#tf_sb_payment_modal").modal("show")},500)):$("#tf_sb_payment_modal").modal("show")}function _(t){$.ajax({url:"/get_student_tuition/"+t,method:"get",dataType:"JSON",success:function(t){d(t.tf_student.id),$(".edit_initial_balance").attr("id",t.tf_student.id),$("#student_tuition_modal .modal-title").text(t.tf_student.student.fname+" "+t.tf_student.student.lname),$(".current_class").text(t.class),$(".tf_balance").text(t.tf_payment.toFixed(2)),$(".tf_sign_up").text(t.tf_sign_up),$(".tf_sb_total").text(t.sec_bond),a=!0,$("#student_tuition_modal").modal("show")}})}$(".datepicker").datepicker({format:"yyyy-mm-dd",forceParse:!1}),$(".select2").select2(),$("body").tooltip({selector:'[data-toggle="tooltip"]',trigger:"hover"}),$(".class_select, .program_select, .branch_select, .departure_select").show(),$("#class_select, #program_select, #branch_select, #departure_year_select,\n        #departure_month_select").next(".select2-container").show(),$("body").click(function(){$('[data-toggle="tooltip"]').tooltip("hide")}),$("input, select").attr("autocomplete","off"),$("#projection_modal").on("hidden.bs.modal",function(t){$("#projection_form :input.required").each(function(){this.style.setProperty("border-color","green","important")}),$(this).find("input,textarea,select").val("").end(),$(".select2").trigger("change.select2")}),$("#add_student_modal").on("hidden.bs.modal",function(t){s(),$("#add_student_continuous").bootstrapToggle("off")}),$("#add_student_continuous").bootstrapToggle("off"),$("#tf_sb_payment_modal").on("hidden.bs.modal",function(t){o(),$("#tf_sb_payment_continuous").bootstrapToggle("off"),1==n&&(a=!0,n=!1,setTimeout(function(){$("#student_tuition_modal").modal("show")},500))}),$("#student_tuition_modal").on("hidden.bs.modal",function(t){1==a&&(a=!1)}),$("#initial_balance_modal").on("hidden.bs.modal",function(t){setTimeout(function(){$("#student_tuition_modal").modal("show")},500)}),$("#tf_sb_payment_continuous").bootstrapToggle("off"),l(),$(".refresh_table").on("click",function(){l()}),$(".student_pick, .tuition_sec_pick, .program_pick, .tf_breakdown_pick").on("click",function(){$(this).hasClass("disabled")||(e=$(this).text(),l())}),$(document).on("click",".add_student",function(){$("#add_student_modal").modal("toggle"),$("#add_student_modal").modal("show")}),$(document).on("click",".sb_payment",function(){t="sec_bond",i("add","sec_bond","Security Bond Payment")}),$(document).on("click",".edit_sb_payment",function(){var e=$(this).attr("id");t="sec_bond",$("#sign_up").val(0),c(e,"sec_bond","Security Bond Payment")}),$(document).on("click",".tf_payment",function(){t="tuition",$("#sign_up").val(0),i("add","tuition","Tuition Fee Payment")}),$(document).on("click",".edit_tf_payment",function(){var e=$(this).attr("id");t="tuition",c(e,"tuition","Tuition Fee Payment")}),$(document).on("click",".edit_initial_balance",function(){var t=$(this).attr("id");$.ajax({url:"/get_initial_balance/"+t,method:"get",dataType:"json",success:function(t){$("#i_id").val(t.id),$("#initial_balance_modal .modal-title").text(t.student.fname+" "+t.student.lname),$("#init_balance").val(t.balance),$("#student_tuition_modal").modal("hide"),setTimeout(function(){$("#initial_balance_modal").modal("show")},500)}})}),$(document).on("click",".view_student_tuition",function(){_($(this).attr("id"))}),$(document).on("click",".projection",function(){var t=$(this).attr("id");$("#prog_id").val(t),$.ajax({url:"/get_tf_projected/"+t,method:"get",dataType:"json",success:function(t){for(var e=0;e<t.tf_name_list.length;e++)if($($(".proj_name_id")[e]).val(t.tf_name_list[e]),0!=t.tf_projected.count)for(var a=0;a<t.tf_projected.length;a++)if(t.tf_name_list[e]==t.tf_projected[a].tf_name_id){$($(".proj_amount")[e]).val(t.tf_projected[a].amount),$($(".proj_date")[e]).val(t.tf_projected[a].date_of_payment),$($(".proj_remarks")[e]).val(t.tf_projected[a].remarks);break}}}),$("#projection_modal").modal("toggle"),$("#projection_modal").modal("show")}),$(document).on("submit","#projection_form",function(t){t.preventDefault();var e=$(".save_projection"),a=document.getElementsByClassName("save_projection")[0];a.disabled=!0,e.html("SAVING..."),$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/save_projection",method:"POST",data:$(this).serialize(),success:function(t){notif("Success!","Record has been saved to the Database!","success","glyphicon-ok"),$("#projection_modal").modal("hide"),l(),a.disabled=!1,e.html("SAVE CHANGES")},error:function(t){swal("Error!","Something went wrong, try again.","error"),a.disabled=!1,e.html("SAVE CHANGES")}})}),$(document).on("submit","#add_student_form",function(t){t.preventDefault();var e=$(".save_add_student"),a=document.getElementsByClassName("save_add_student")[0];a.disabled=!0,e.html("SAVING..."),$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/save_tf_student",method:"POST",data:$(this).serialize(),success:function(t){notif("Success!","Record has been saved to the Database!","success","glyphicon-ok"),$("#add_student_continuous").is(":checked")?s():$("#add_student_modal").modal("hide"),l(),a.disabled=!1,e.html("SAVE CHANGES")},error:function(t){swal("Error!","Something went wrong, try again.","error"),a.disabled=!1,e.html("SAVE CHANGES")}})}),$(document).on("submit","#tf_sb_payment_form",function(e){e.preventDefault();var a=$(".save_tf_sb_payment"),s=document.getElementsByClassName("save_tf_sb_payment")[0];s.disabled=!0,a.html("SAVING..."),$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/save_tf_sb_payment",method:"POST",data:$(this).serialize(),success:function(e){notif("Success!","Record has been saved to the Database!","success","glyphicon-ok"),$("#tf_sb_payment_continuous").is(":checked")?(o(),$("#add_edit").val("add"),$("#p_type").val(t)):(1==n&&(_($("#p_student").val()),d($("#p_student").val())),$("#tf_sb_payment_modal").modal("hide")),l(),s.disabled=!1,a.html("SAVE CHANGES")},error:function(t){swal("Error!","Something went wrong, try again.","error"),s.disabled=!1,a.html("SAVE CHANGES")}})}),$(document).on("submit","#initial_balance_form",function(t){t.preventDefault();var e=$(".save_initial_balance"),a=document.getElementsByClassName("save_initial_balance")[0];a.disabled=!0,e.html("SAVING..."),$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/save_initial_balance",method:"POST",data:$(this).serialize(),success:function(t){notif("Success!","Record has been saved to the Database!","success","glyphicon-ok"),_($("#i_id").val()),d($("#i_id").val()),l(),$("#initial_balance_modal").modal("hide"),a.disabled=!1,e.html("SAVE CHANGES")},error:function(t){swal("Error!","Something went wrong, try again.","error"),a.disabled=!1,e.html("SAVE CHANGES")}})}),$("#sign_up_check").on("change",function(){$(this).is(":checked")?$("#sign_up").val(1):$("#sign_up").val(0),$("#p_student").trigger("change")}),$("#student").on("change",function(){var t=$(this).val();null!=$(this).val()?$.ajax({url:"/get_balance_class/"+t,method:"get",dataType:"JSON",success:function(t){$("#balance").val(t.balance),$("#balance").attr("readonly",!1),$("#student_class").val(t.class)}}):($("#balance").val(""),$("#balance").attr("readonly",!0),$("#student_class").val(""))}),$("#p_student").on("change",function(){var t=$(this).val();null!=$(this).val()?$.ajax({url:"/get_student_tuition/"+t,method:"get",dataType:"JSON",success:function(t){$("#sign_up_check").is(":checked")?$("#current, #total").val(t.tf_sign_up):"tuition"==$("#p_type").val()?($("#current, #total").val(t.tf_payment),$("#sign_up_check").attr("disabled",!1)):"sec_bond"==$("#p_type").val()&&$("#current, #total").val(t.sec_bond),$("#p_amount").attr("readonly",!1)}}):($("#current, #total, #p_amount, #date, #remarks").val(""),$("#p_amount").attr("readonly",!0))}),$("#class_select, #branch_select, #program_select, #departure_year_select, \n        #departure_month_select").on("change",function(){"class_select"==$(this).attr("id")?$("#class_hidden").val($(this).val()):"program_select"==$(this).attr("id")?$("#program_hidden").val($(this).val()):"branch_select"==$(this).attr("id")?$("#branch_hidden").val($(this).val()):"departure_year_select"==$(this).attr("id")?$("#year_hidden").val($(this).val()):"departure_month_select"==$(this).attr("id")&&$("#month_hidden").val($(this).val()),l()}),$("#p_amount").on("keyup change",function(){var t=$("#current").val(),e=$("#p_amount").val(),a=$("#p_prev_amount").val(),n=$("#p_type").val();$("#sign_up_check").is(":checked")&&(""!=a&&(e=parseFloat(e)-parseFloat(a)),$("#total").val(parseFloat(t)+parseFloat(e))),"tuition"==n?(""!=a&&(e=parseFloat(e)-parseFloat(a)),$("#total").val(parseFloat(t)-parseFloat(e))):"sec_bond"==n&&(""!=a&&(e=parseFloat(e)-parseFloat(a)),$("#total").val(parseFloat(t)+parseFloat(e)))}),$("#student").select2({allowClear:!0,placeholder:"Select Student",ajax:{url:"/t_get_student",dataType:"json",data:function(t){return{name:t.term,page:t.page}},processResults:function(t){return{results:t.results}}}}),$("#p_student").select2({allowClear:!0,placeholder:"Select Student",ajax:{url:"/get_tf_student",dataType:"json",data:function(t){return{name:t.term,page:t.page}},processResults:function(t){return{results:t.results}}}})})}});