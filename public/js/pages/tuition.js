!function(t){var e={};function a(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/",a(a.s=14)}({14:function(t,e,a){t.exports=a("1l0Y")},"1l0Y":function(t,e){$(document).ready(function(){var t,e,a,n,o,r,s,l="Student",i=!1,d=!1;function c(){$("#tf_payment_form :input.required").each(function(){this.style.setProperty("border-color","green","important")}),$("#tf_payment_form").find("input,textarea,select").val("").end(),$(".select2").trigger("change.select2")}function m(){$("#sb_payment_form :input.required").each(function(){this.style.setProperty("border-color","green","important")}),$("#sb_payment_form").find("input,textarea,select").val("").end(),$(".select2").trigger("change.select2")}function u(){$("li.student_pick, li.payment_pick, li.sec_bond_pick, li.program_pick, \n        li.tf_breakdown_pick, li.summary_pick, li.soa_pick").removeClass("disabled").css("cursor","pointer"),$("a.student_pick, a.payment_pick, a.sec_bond_pick, a.program_pick, \n        a.tf_breakdown_pick, a.summary_pick, a.soa_pick").removeClass("disabled").css("pointer-events","auto"),$(".refresh_table").attr("disabled",!1)}function _(){$("li.student_pick, li.payment_pick, li.sec_bond_pick, li.program_pick, \n        li.tf_breakdown_pick, li.summary_pick, li.soa_pick").addClass("disabled").css("cursor","not-allowed"),$("a.student_pick, a.payment_pick, a.sec_bond_pick, a.program_pick, \n        a.tf_breakdown_pick, a.summary_pick, a.soa_pick").addClass("disabled").css("pointer-events","none"),$(".refresh_table").attr("disabled",!0),get_year=$("#departure_year_filter option:selected").text(),get_month=$("#departure_month_filter option:selected").text(),function(){switch(l){case"Payment History":t=" DEPARTURE PAYMENT HISTORY";break;case"Security Bond History":t=" DEPARTURE SECURITY BOND"}get_departure="All"==get_year&&"All"==get_month?"All":get_year+" "+get_month,payment_buttons_format=[{extend:"excelHtml5",title:get_departure+t,exportOptions:{columns:":visible"}},"colvis"]}(),"Student"==l?(p(),$("#student_table").DataTable({initComplete:function(t,e){u()},dom:"Bflrtip",buttons:payment_buttons_format,processing:!0,destroy:!0,scrollX:!0,scrollCollapse:!0,fixedColumns:!0,responsive:!0,ajax:{url:"/view_tf_student",data:{class_filter:e,program_filter:a,branch_filter:n,departure_year_filter:o,departure_month_filter:r}},columns:[{data:"name",name:"name"},{data:"program.name",name:"program"},{data:"branch.name",name:"branch"},{data:"contact",name:"contact"},{data:"balance",name:"balance"},{data:"sec_bond",name:"sec_bond"},{data:"class",name:"class"},{data:"status",name:"status"},{data:"departure",name:"departure"},{data:"action",orderable:!1,searchable:!1}],columnDefs:[{defaultContent:"",targets:"_all"},{className:"text-right",targets:[4,5]}],footerCallback:function(t,e,a,n,o){var r=this.api(),s=function(t){return"string"==typeof t?1*t.replace(/[\$,]/g,""):"number"==typeof t?t:0};total=r.column(4).data().reduce(function(t,e){return s(t)+s(e)},0),total2=r.column(5).data().reduce(function(t,e){return s(t)+s(e)},0),$(r.column(4).footer()).html("₱"+total.toFixed(2)),$(r.column(5).footer()).html("₱"+total2.toFixed(2))}})):"Programs"==l?$("#program_table").DataTable({initComplete:function(t,e){u()},processing:!0,destroy:!0,scrollCollapse:!0,responsive:!0,ajax:{url:"/view_tf_program",data:{}},columns:[{data:"name",name:"name"},{data:"total",name:"total"},{data:"action",orderable:!1,searchable:!1}],columnDefs:[{defaultContent:"",targets:"_all"},{className:"text-right",targets:[1]}]}):"Payment History"==l?(p(),$("#payment_table").DataTable({initComplete:function(t,e){u()},dom:"Bflrtip",buttons:payment_buttons_format,processing:!0,destroy:!0,scrollX:!0,scrollCollapse:!0,responsive:!0,ajax:{url:"/view_tf_payment",data:{class_filter:e,program_filter:a,branch_filter:n,departure_year_filter:o,departure_month_filter:r}},columns:[{data:"name",name:"name"},{data:"tf_name.name",name:"tf_name"},{data:"student.program.name",name:"program"},{data:"student.branch.name",name:"branch"},{data:"amount",name:"amount"},{data:"date",name:"date"},{data:"remarks",name:"remarks"},{data:"action",orderable:!1,searchable:!1}],columnDefs:[{defaultContent:"",targets:"_all"},{className:"text-right",targets:[4]}],order:[5,"desc"],footerCallback:function(t,e,a,n,o){var r=this.api(),s=function(t){return"string"==typeof t?1*t.replace(/[\$,]/g,""):"number"==typeof t?t:0};total=r.column(4).data().reduce(function(t,e){return s(t)+s(e)},0),$(r.column(4).footer()).html("₱"+total.toFixed(2))}})):"Security Bond History"==l?(p(),$("#sec_bond_table").DataTable({initComplete:function(t,e){u()},dom:"Bflrtip",buttons:payment_buttons_format,processing:!0,destroy:!0,scrollX:!0,scrollCollapse:!0,responsive:!0,ajax:{url:"/view_sec_bond",data:{class_filter:e,program_filter:a,branch_filter:n,departure_year_filter:o,departure_month_filter:r}},columns:[{data:"name",name:"name"},{data:"student.program.name",name:"program"},{data:"student.branch.name",name:"branch"},{data:"amount",name:"amount"},{data:"date",name:"date"},{data:"remarks",name:"remarks"},{data:"action",orderable:!1,searchable:!1}],columnDefs:[{defaultContent:"",targets:"_all"},{className:"text-right",targets:[3]}],order:[4,"desc"],footerCallback:function(t,e,a,n,o){var r=this.api(),s=function(t){return"string"==typeof t?1*t.replace(/[\$,]/g,""):"number"==typeof t?t:0};total=r.column(3).data().reduce(function(t,e){return s(t)+s(e)},0),$(r.column(3).footer()).html("₱"+total.toFixed(2))}})):"TF Breakdown"==l?(e=$("#class_filter").val(),a=$("#program_filter").val(),n=$("#branch_filter").val(),o=$("#departure_year_filter").val(),r=$("#departure_month_filter").val(),$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/view_tf_breakdown",data:{class_filter:e,program_filter:a,branch_filter:n,departure_year_filter:o,departure_month_filter:r},method:"get",dataType:"json",success:function(t){$("#tf_breakdown_table").empty();var e="",a="",n="";e+="<thead>";for(var o=0;o<t.installment;o++)a+='<th colspan="2" class="installments">Installment '+(o+1)+"</th>",n+="<th>Amount Paid</th><th>Payment Date</th>";e+='\n                <tr>\n                    <th rowspan="2" style="width: 300px;">Name</th>\n                    <th rowspan="2" style="width: 150px;">Program</th>\n                    <th colspan="2" style="width: 250px;">Prof Fee</th>\n                    <th rowspan="2" style="width: 150px;">Total Tuition</th>\n                    <th rowspan="2" style="width: 150px;">Total Payment</th>'+a+'<th rowspan="2" style="width: 100px;">Balance</th>\n                </tr>\n                <tr>'+(n+="<th>Amount Paid</th><th>Payment Date</th>"),e+="</thead>",e+="<tbody>";for(var r=0;r<t.student.length;r++){for(var s=t.student[r].mname?t.student[r].mname:"",l=t.student[r].program?t.student[r].program.name:"",i="",d=0;d<t.installment;d++){var c=0,m="";t.student[r].payment[d]&&(c=t.student[r].payment[d].amount,m=t.student[r].payment[d].date),i+='<td style="text-align:right;">'+c+'</td><td style="text-align:center;">'+m+"</td>"}e+="<tr>\n                        <td>"+t.student[r].lname+", "+t.student[r].fname+" "+s+"</td><td>"+l+'</td><td style="text-align:right;">'+t.student[r].prof_fee+'</td><td style="text-align:center;">'+t.student[r].prof_fee_date+'</td><td style="text-align:right;">'+t.student[r].balance+'</td><td style="text-align:right;">'+t.student[r].total_payment+"</td>"+i+'<td style="text-align:right;">'+t.student[r].remaining_bal+"</td></tr>"}e+="</tbody>",e+="<tfoot>";for(var _="",p=0;p<t.installment;p++)_+='<td style="text-align:right;">'+t.footer.installment[p]+"</td><td></td>";e+='<tr>\n                    <td style="text-align:center;" colspan="2">TOTAL</td>\n                    <td style="text-align:right;">'+t.footer.sign_up+'</td>\n                    <td></td>\n                    <td style="text-align:right;">'+t.footer.total_tuition+'</td>\n                    <td style="text-align:right;">'+t.footer.total_payment+"</td>"+_+'<td style="text-align:right;">'+t.footer.balance+"</td>",e+="</tfoot>",$("#tf_breakdown_table").append(e),u()}})):"Summary"==l?(e=$("#class_filter").val(),a=$("#program_filter").val(),n=$("#branch_filter").val(),o=$("#departure_year_filter").val(),r=$("#departure_month_filter").val(),$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/view_summary",data:{class_filter:e,program_filter:a,branch_filter:n,departure_year_filter:o,departure_month_filter:r},method:"get",dataType:"json",success:function(t){$("#summary_table").empty();var e="";e+="<thead>",e+='\n                <tr>\n                    <th style="width: 300px;">Name</th>\n                    <th style="width: 150px;">Program</th>\n                    <th style="width: 150px;">School</th>\n                    <th style="width: 150px;">Sec Bond Amount</th>\n                    <th style="width: 200px;">Tuition Fee / Sign Up Fee</th>\n                    <th style="width: 100px;">VISA Fee</th>\n                    <th style="width: 100px;">PDOS</th>\n                    <th style="width: 120px;">Selection Fee</th>\n                    <th style="width: 100px;">Airfare</th>\n                    <th style="width: 100px;">DHL</th>\n                    <th style="width: 100px;">BC&ITR</th>\n                </tr>',e+="</thead>",e+="<tbody>";for(var a=0;a<t.length;a++){var n=t[a].mname?t[a].mname:"",o=t[a].program?t[a].program.name:"",r=t[a].school?t[a].school.name:"";e+="<tr>\n                    <td>"+t[a].lname+", "+t[a].fname+" "+n+"</td><td>"+o+"</td><td>"+r+'</td><td style="text-align:right;">'+t[a].sec_bond+'</td><td style="text-align:right;">'+t[a].tf_su+'</td><td style="text-align:right;">'+t[a].visa+'</td><td style="text-align:right;">'+t[a].pdos+'</td><td style="text-align:right;">'+t[a].select+'</td><td style="text-align:right;">'+t[a].air+'</td><td style="text-align:right;">'+t[a].dhl+'</td><td style="text-align:right;">'+t[a].docu+"</td></td>"}e+="</tbody>",$("#summary_table").append(e),u()}})):"SOA"==l&&(p(),$("#soa_table").DataTable({initComplete:function(t,e){u()},dom:"Bflrtip",buttons:[{extend:"excelHtml5",title:get_departure+t,exportOptions:{columns:":visible"}},"colvis"],processing:!0,destroy:!0,scrollX:!0,scrollCollapse:!0,responsive:!0,ajax:{url:"/view_soa",data:{class_filter:e,program_filter:a,batch_filter:s}},columns:[{data:"name",name:"name"},{data:"program.name",name:"program"},{data:"contact",name:"contact"},{data:"batch",name:"batch"},{data:"due",name:"due"},{data:"paid",name:"paid"},{data:"balance",name:"balance"},{data:"action",orderable:!1,searchable:!1}],columnDefs:[{defaultContent:"",targets:"_all"},{className:"text-right",targets:[4,5,6]}],footerCallback:function(t,e,a,n,o){for(var r=this.api(),s=function(t){return"string"==typeof t?1*t.replace(/[\$,]/g,""):"number"==typeof t?t:0},l=[4,5,5],i=0;i<l.length;i++)total=r.column(l[i]).data().reduce(function(t,e){return s(t)+s(e)},0),$(r.column(l[i]).footer()).html("₱"+total.toFixed(2))}}))}function p(){e=$("#class_filter").val(),a=$("#program_filter").val(),n=$("#branch_filter").val(),o=$("#departure_year_filter").val(),r=$("#departure_month_filter").val(),s=$("#batch_filter").val(),class_hidden=e,program_hidden=a,batch_hidden=s}function f(t){$.ajax({url:"/view_tf_student_modal/"+t,method:"get",dataType:"JSON",success:function(t){$("#student_tuition_modal .modal-title").text(t.student.lname+", "+t.student.fname+" "+(t.student.mname?t.student.mname:"")),$(".current_class").text(t.class_students);for(var e=0;e<=Object.keys(t.tf).length;e++)$($(".pay")[e]).text(t.tf[e]);if(0!=t.tf_projected.length){for(var a=0;a<t.tf_projected.length;a++)$($(".bal")[a]).text(t.tf_projected[a].amount);$($(".bal")[8]).text(t.tp_total)}else for(var n=0;n<Object.keys(t.tf).length+1;n++)$($(".bal")[n]).text(0);var o;$(".sb_total").text(t.sb_total),o=t.student.id,$("#tf_modal_table").DataTable({paging:!1,info:!1,searching:!1,processing:!0,destroy:!0,responsive:!0,ajax:{url:"/view_tf_modal/"+o,data:{}},columns:[{data:"amount",name:"amount"},{data:"tf_name.name",name:"tf_name.name"},{data:"date",name:"date"},{data:"remarks",name:"remarks"},{data:"action",orderable:!1,searchable:!1}],columnDefs:[{defaultContent:"",targets:"_all"}],order:[2,"desc"]}),$("#sb_modal_table").DataTable({paging:!1,info:!1,searching:!1,processing:!0,destroy:!0,responsive:!0,ajax:{url:"/view_sb_modal/"+o,data:{}},columns:[{data:"amount",name:"amount"},{data:"date",name:"date"},{data:"remarks",name:"remarks"},{data:"action",orderable:!1,searchable:!1}],columnDefs:[{defaultContent:"",targets:"_all"}],order:[1,"desc"]}),i=!0}})}$(".datepicker").datepicker({format:"yyyy-mm-dd",forceParse:!1}),$(".select2").select2(),$("body").tooltip({selector:'[data-toggle="tooltip"]',trigger:"hover"}),$("body").click(function(){$('[data-toggle="tooltip"]').tooltip("hide")}),$("input, select").attr("autocomplete","off"),$("#projection_modal").on("hidden.bs.modal",function(t){$("#projection_form :input.required").each(function(){this.style.setProperty("border-color","green","important")}),$(this).find("input,textarea,select").val("").end(),$(".select2").trigger("change.select2")}),$("#tf_payment_modal").on("hidden.bs.modal",function(t){c(),$("#tf_payment_continuous").bootstrapToggle("off"),1==d&&(i=!0,d=!1,setTimeout(function(){$("#student_tuition_modal").modal("show")},500))}),$("#sb_payment_modal").on("hidden.bs.modal",function(t){m(),$("#sb_payment_continuous").bootstrapToggle("off"),1==d&&(i=!0,d=!1,setTimeout(function(){$("#student_tuition_modal").modal("show")},500))}),$("#filter_modal").on("hidden.bs.modal",function(t){var e=$(".filter");document.getElementsByClassName("filter")[0].disabled=!1,e.html("SAVE CHANGES")}),$("#tf_payment_continuous").bootstrapToggle("off"),$("#sb_payment_continuous").bootstrapToggle("off"),$(document).on("shown.bs.tab",'a[data-toggle="tab"]',function(t){$.fn.dataTable.tables({visible:!0,api:!0}).columns.adjust()}),_(),$(".refresh_table").on("click",function(){_()}),$(document).on("click","#filter",function(){$("#filter_modal").modal("show")}),$(".student_pick, .payment_pick, .sec_bond_pick, .program_pick, \n        .tf_breakdown_pick, .summary_pick, .soa_pick").on("click",function(){$(this).hasClass("disabled")||(l=$(this).text(),_())}),$(document).on("click",".tf_payment",function(){$("#p_add_edit").val("add"),$("#tf_payment_modal").modal("show")}),$(document).on("click",".sb_payment",function(){$("#s_add_edit").val("add"),$("#sb_payment_modal").modal("show")}),$(document).on("click",".edit_tf_payment",function(){var t=$(this).attr("id");$.ajax({url:"/get_tf_payment/"+t,method:"get",dataType:"JSON",success:function(t){$("#p_id").val(t.id),$("#p_add_edit").val("edit"),$("#p_student").val(t.stud_id).trigger("change"),$("#type").val(t.tf_name_id).trigger("change"),$("#p_amount").val(t.amount),$("#p_date").val(t.date),$("#p_remarks").val(t.remarks),1==i?(d=!0,$("#student_tuition_modal").modal("hide"),setTimeout(function(){$("#tf_payment_modal").modal("show")},500)):$("#tf_payment_modal").modal("show")}})}),$(document).on("click",".edit_sb_payment",function(){var t=$(this).attr("id");$.ajax({url:"/get_sb_payment/"+t,method:"get",dataType:"JSON",success:function(t){$("#s_id").val(t.id),$("#s_add_edit").val("edit"),$("#s_student").val(t.stud_id).trigger("change"),$("#s_amount").val(t.amount),$("#s_date").val(t.date),$("#s_remarks").val(t.remarks),1==i?(d=!0,$("#student_tuition_modal").modal("hide"),setTimeout(function(){$("#sb_payment_modal").modal("show")},500)):$("#sb_payment_modal").modal("show")}})}),$(document).on("click",".view_tf_student_modal",function(){f($(this).attr("id")),$("#student_tuition_modal").modal("show")}),$(document).on("click",".delete_tf_payment",function(){var t=$(this).attr("id");swal.fire({title:"Confirm User",text:"For security purposes, input your password again.",input:"password",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Confirm",showLoaderOnConfirm:!0,preConfirm:function(e){$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/confirm_user",data:{password:e},method:"POST",success:function(a){0!=a?swal({title:"Warning",text:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(a){a.value&&$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/delete_tf_payment",data:{id:t,password:e},method:"get",type:"json",success:function(t){notif("Success!","This Payment has been Deleted","success","glyphicon-ok"),1==i&&f(t),_()}})}):swal("Password Incorrect!","Please try again","error")}})}})}),$(document).on("click",".delete_sb_payment",function(){var t=$(this).attr("id");swal.fire({title:"Confirm User",text:"For security purposes, input your password again.",input:"password",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Confirm",showLoaderOnConfirm:!0,preConfirm:function(e){$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/confirm_user",data:{password:e},method:"POST",success:function(a){0!=a?swal({title:"Warning",text:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(a){a.value&&$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/delete_sb_payment",data:{id:t,password:e},method:"get",type:"json",success:function(t){notif("Success!","This Payment has been Deleted","success","glyphicon-ok"),1==i&&f(t),_()}})}):swal("Password Incorrect!","Please try again","error")}})}})}),$(document).on("click",".projection",function(){var t=$(this).attr("id");$("#prog_id").val(t),$.ajax({url:"/get_tf_projected/"+t,method:"get",dataType:"json",success:function(t){for(var e=0;e<t.tf_name_list.length;e++)if($($(".proj_name_id")[e]).val(t.tf_name_list[e]),0!=t.tf_projected.count)for(var a=0;a<t.tf_projected.length;a++)if(t.tf_name_list[e]==t.tf_projected[a].tf_name_id){$($(".proj_amount")[e]).val(t.tf_projected[a].amount),$($(".proj_date")[e]).val(t.tf_projected[a].date_of_payment),$($(".proj_remarks")[e]).val(t.tf_projected[a].remarks);break}}}),$("#projection_modal").modal("toggle"),$("#projection_modal").modal("show")}),$(document).on("submit","#projection_form",function(t){t.preventDefault();var e=$(".save_projection"),a=document.getElementsByClassName("save_projection")[0];a.disabled=!0,e.html("SAVING..."),$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/save_projection",method:"POST",data:$(this).serialize(),success:function(t){notif("Success!","Record has been saved to the Database!","success","glyphicon-ok"),$("#projection_modal").modal("hide"),_(),a.disabled=!1,e.html("SAVE CHANGES")},error:function(t){swal("Error!","Something went wrong, please contact IT Officer.","error"),a.disabled=!1,e.html("SAVE CHANGES")}})}),$(document).on("submit","#tf_payment_form",function(t){t.preventDefault();var e=$(".save_tf_payment"),a=document.getElementsByClassName("save_tf_payment")[0];a.disabled=!0,e.html("SAVING..."),$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/save_tf_payment",method:"POST",data:$(this).serialize(),success:function(t){if(notif("Success!","Record has been saved to the Database!","success","glyphicon-ok"),$("#tf_payment_continuous").is(":checked"))c(),$("#p_add_edit").val("add");else{if(1==d)f($("#p_student").val());$("#tf_payment_modal").modal("hide")}a.disabled=!1,e.html("SAVE CHANGES"),_()},error:function(t){swal("Error!","Something went wrong, please contact IT Officer.","error"),a.disabled=!1,e.html("SAVE CHANGES")}})}),$(document).on("submit","#sb_payment_form",function(t){t.preventDefault();var e=$(".save_sb_payment"),a=document.getElementsByClassName("save_sb_payment")[0];a.disabled=!0,e.html("SAVING..."),$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/save_sb_payment",method:"POST",data:$(this).serialize(),success:function(t){if(notif("Success!","Record has been saved to the Database!","success","glyphicon-ok"),$("#sb_payment_continuous").is(":checked"))m(),$("#s_add_edit").val("add");else{if(1==d)f($("#s_student").val());$("#sb_payment_modal").modal("hide")}a.disabled=!1,e.html("SAVE CHANGES"),_()},error:function(t){swal("Error!","Something went wrong, please contact IT Officer.","error"),a.disabled=!1,e.html("SAVE CHANGES")}})}),$(document).on("submit","#filter_form",function(t){t.preventDefault();var e=$(".filter");document.getElementsByClassName("filter")[0].disabled=!0,e.html("FILTERING..."),_(),$("#filter_modal").modal("hide")}),$("#p_student, #s_student").select2({allowClear:!0,placeholder:"Select Student",ajax:{url:"/get_tf_student",dataType:"json",data:function(t){return{name:t.term,page:t.page}},processResults:function(t){return{results:t.results}}}})})}});