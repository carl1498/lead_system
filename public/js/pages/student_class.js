!function(t){var e={};function a(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=e,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/",a(a.s=10)}({10:function(t,e,a){t.exports=a("8/vy")},"8/vy":function(t,e){$(document).ready(function(){var t,e,a,s=!1,n="Ongoing",l=0,c="Students";function o(){$("#assign_student_class_form :input.required").each(function(){this.style.setProperty("border-color","green","important")}),$("#assign_student_class_modal").find(".select2, input").val("").end(),$("#assign_student_class_modal").find("#date_class, #student_class").prop("disabled",!0),$(".completeCheck").prop("checked",!1),s=!1,$(".select2").trigger("change.select2")}function d(){0!=l?($("li.tab_pick, .class_pick").removeClass("disabled").css("cursor","pointer"),$("a.tab_pick, .class_pick").removeClass("disabled").css("pointer-events","auto"),$.ajax({url:"/get_class_settings/"+l,method:"get",dataType:"json",success:function(t){$("#e_sensei").val(t.sensei_id).trigger("change"),$("#e_start_date").val(t.start_date),$("#e_end_date").val(t.end_date),$("#edit_class_id").val(t.id);for(var e=0;e<6;e++)t.class_day[e].start_time&&($($(".editCheck")[e]).prop("checked",!0),$($(".edit_start_time")[e]).prop("readonly",!1),$($(".edit_end_time")[e]).prop("readonly",!1),$($(".edit_start_time")[e]).val(t.class_day[e].start_time),t.class_day[e].end_time&&$($(".edit_end_time")[e]).val(t.class_day[e].end_time));$("#e_end_date").val()?$(".end_class").prop("disabled",!1):$(".end_class").prop("disabled",!0),$("#e_remarks").val(t.remarks)}})):($("li.stud_pick, .class_pick").removeClass("disabled").css("cursor","pointer"),$("a.stud_pick, .class_pick").removeClass("disabled").css("pointer-events","auto")),$(".refresh_table").attr("disabled",!1)}$(".datepicker").datepicker({format:"yyyy-mm-dd",forceParse:!1}),$(".timepicker").timepicker({showSeconds:!1,showMeridian:!1,defaultTime:!1,showInputs:!1,pickTime:!1,template:!1}),$(".select2").select2(),$("#date_class").select2({placeholder:"Select Class"}),$("#student_class").select2({placeholder:"Select Student"}),$("body").tooltip({selector:'[data-toggle="tooltip"]',trigger:"hover"}),$('[data-toggle="tooltip"]').click(function(){$('[data-toggle="tooltip"]').tooltip("hide")}),$("input, select").attr("autocomplete","off"),$("#add_class_modal").on("hidden.bs.modal",function(t){$("#add_class_form :input.required").each(function(){this.style.setProperty("border-color","green","important")}),$(this).find(".add_start_time, .add_end_time, #start_date, #end_date, #remarks, select").val("").end(),$(this).find(".add_start_time, .add_end_time").prop("readonly",!0),$(".addCheck").prop("checked",!1),$(".select2").trigger("change.select2")}),$("#assign_student_class_modal").on("hidden.bs.modal",function(t){o(),$("#assign_continuous").bootstrapToggle("off")}),$("#assign_continuous").bootstrapToggle("off"),$(document).on("shown.bs.tab",'a[data-toggle="tab"]',function(t){$.fn.dataTable.tables({visible:!0,api:!0}).columns.adjust()});var r=[{data:"name",name:"name"},{data:"student.contact",name:"contact"},{data:"student.program.name",name:"program"},{data:"departure",name:"departure"},{data:"student.status",name:"status"},{data:"class_status",name:"class_status"},{data:"start_date",name:"start_date"},{data:"end_date",name:"end_date"},{data:"action",orderable:!1,searchable:!1}],i=[{data:"name",name:"name"},{data:"contact",name:"contact"},{data:"program.name",name:"program"},{data:"departure",name:"departure"},{data:"status",name:"status"},{data:"class_status",name:"class_status"},{data:"action",name:"action"}],u=[{data:"name",name:"name"},{data:"contact",name:"contact"},{data:"program.name",name:"program"},{data:"departure",name:"departure"},{data:"status",name:"status"}],_=[{data:"name",name:"name"},{data:"contact",name:"contact"},{data:"program.name",name:"program"},{data:"departure",name:"departure"},{data:"status",name:"status"},{data:"class_status",name:"class_status"}],m=[{data:"sensei",name:"sensei"},{data:"start_date",name:"start_date"},{data:"end_date",name:"end_date"},{data:"current_class.remarks",name:"remarks"}];function p(){$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/get_class/"+n,method:"get",dataType:"json",success:function(t){$("#class_box").empty();var e="";e+='<ul class="list-group list-group-unbordered">';for(var a=0;a<t.class_settings.length;a++){for(var s=!0,n="",c=0;c<6;c++)t.class_settings[a].class_day[c].start_time&&(0==s&&(n+=" â€¢ "),n+='<span data-container="body" data-toggle="tooltip" \n                            data-placement="top"\n                            title="'+t.class_settings[a].class_day[c].start_time+" ~ "+(t.class_settings[a].class_day[c].end_time?t.class_settings[a].class_day[c].end_time:"TBD")+'">'+t.class_settings[a].class_day[c].day_name.abbrev+"</span>",s=!1);e+='\n                    <li class="list-group-item class_pick" id="'+t.class_settings[a].id+'">\n                        <p class="class_get_id" style="word-wrap: break-word;">Class ID: '+t.class_settings[a].id+" | "+t.class_settings[a].start_date+" ~ "+(t.class_settings[a].end_date?t.class_settings[a].end_date:"TBD")+"<br><b>"+t.class_settings[a].sensei.fname+" "+t.class_settings[a].sensei.lname+'</b><br><span style="cursor:help;">'+n+'<br><span class="label label-success" data-container="body" data-toggle="tooltip" data-placement="top" title="Complete">'+t.class_settings[a].complete+'</span>&nbsp;<span class="label label-danger" data-container="body" data-toggle="tooltip" data-placement="top" title="Back Out">'+t.class_settings[a].backout+'</span>&nbsp;<span class="label label-info" data-container="body" data-toggle="tooltip" data-placement="top" title="Active">'+t.class_settings[a].active+'</span>&nbsp;<span class="label label-warning" data-container="body" data-toggle="tooltip" data-placement="top" title="No. of Students">'+t.class_settings[a].all+"</span><br><span> Remarks: "+(t.class_settings[a].remarks?t.class_settings[a].remarks:"")+"</span></p>\n                    </li>"}e+="</ul>",$("#on_going_class_box span").text(t.on_going),$("#complete_class_box span").text(t.completed),$("#all_class_box span").text(t.all),$("#class_box").append(e),0!=l&&$(".class_pick#"+l).css("background-color","#FEFAD4")}})}function g(){$("#sensei_class").select2({placeholder:"Select Sensei",ajax:{url:"/senseiClass/"+s,dataType:"json",data:function(t){return{name:t.term,page:t.page}},processResults:function(t){return{results:t.results}}}})}function f(){switch($("li.tab_pick, .class_pick").addClass("disabled").css("cursor","not-allowed"),$("a.tab_pick, .class_pick").addClass("disabled").css("pointer-events","none"),$(".refresh_table").attr("disabled",!0),$("#edit_class_form").find(".edit_start_time, .edit_end_time, #e_start_date, #e_end_date, #e_remarks, select").val("").end(),$("#edit_class_form").find(".edit_start_time, .edit_end_time").prop("readonly",!0),$(".editCheck").prop("checked",!1),$(".select2").trigger("change.select2"),p(),c){case"Students":$("#student_class_table").DataTable({stateSave:!0,stateSaveCallback:function(t,e){localStorage.setItem("DataTables_"+t.sInstance,JSON.stringify(e))},stateLoadCallback:function(t){return JSON.parse(localStorage.getItem("DataTables_"+t.sInstance))},initComplete:function(t,e){d()},processing:!0,destroy:!0,scrollX:!0,scrollCollapse:!0,fixedColumns:!0,responsive:!0,ajax:{url:"/class_students",data:{current_class_select:l}},columnDefs:[{defaultContent:"",targets:"_all"}],columns:r});break;case"With Classes":$("#student_with_class_table").DataTable({stateSave:!0,stateSaveCallback:function(t,e){localStorage.setItem("DataTables_"+t.sInstance,JSON.stringify(e))},stateLoadCallback:function(t){return JSON.parse(localStorage.getItem("DataTables_"+t.sInstance))},initComplete:function(t,e){d()},processing:!0,destroy:!0,scrollX:!0,scrollCollapse:!0,fixedColumns:!0,responsive:!0,ajax:{url:"/with_class_students"},columnDefs:[{defaultContent:"",targets:"_all"}],columns:i});break;case"No Classes":$("#student_no_class_table").DataTable({stateSave:!0,stateSaveCallback:function(t,e){localStorage.setItem("DataTables_"+t.sInstance,JSON.stringify(e))},stateLoadCallback:function(t){return JSON.parse(localStorage.getItem("DataTables_"+t.sInstance))},initComplete:function(t,e){d()},processing:!0,destroy:!0,scrollX:!0,scrollCollapse:!0,fixedColumns:!0,responsive:!0,ajax:{url:"/no_class_students"},columnDefs:[{defaultContent:"",targets:"_all"}],columns:u});break;case"All":$("#student_all_class_table").DataTable({stateSave:!0,stateSaveCallback:function(t,e){localStorage.setItem("DataTables_"+t.sInstance,JSON.stringify(e))},stateLoadCallback:function(t){return JSON.parse(localStorage.getItem("DataTables_"+t.sInstance))},initComplete:function(t,e){d()},processing:!0,destroy:!0,scrollX:!0,scrollCollapse:!0,fixedColumns:!0,responsive:!0,ajax:{url:"/all_class_students"},columnDefs:[{defaultContent:"",targets:"_all"}],columns:_});break;default:d()}}$(".addCheck").change(function(){t=$(this).next().val(),startTimeInput=document.getElementsByClassName("add_start_time")[t-1],endTimeInput=document.getElementsByClassName("add_end_time")[t-1],$(this).is(":checked")?$([startTimeInput,endTimeInput]).prop("readonly",!1):($([startTimeInput,endTimeInput]).prop("readonly",!0),$([startTimeInput,endTimeInput]).val(""))}),$(".editCheck").change(function(){t=$(this).next().val(),startTimeInput=document.getElementsByClassName("edit_start_time")[t-1],endTimeInput=document.getElementsByClassName("edit_end_time")[t-1],$(this).is(":checked")?$([startTimeInput,endTimeInput]).prop("readonly",!1):($([startTimeInput,endTimeInput]).prop("readonly",!0),$([startTimeInput,endTimeInput]).val(""))}),$(".add_class").on("click",function(){$("#add_class_modal").modal("toggle"),$("#add_class_modal").modal("show")}),$(document).on("click",".edit_student_date",function(){var t=$(this).attr("id");$.ajax({url:"/get_student_date/"+t,method:"get",dataType:"json",success:function(t){$("#edit_student_class_id").val(t.id),$("#student_name_temp").val(t.student.lname+", "+t.student.fname),$("#e_student_start_date").val(t.start_date),$("#e_student_end_date").val(t.end_date),$("#edit_student_date_modal").modal("toggle"),$("#edit_student_date_modal").modal("show")}})}),$(document).on("submit","#add_class_form",function(t){t.preventDefault();var e=$(".save_class"),a=document.getElementsByClassName("save_class")[0];a.disabled=!0,e.html("SAVING..."),$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/add_class",method:"POST",data:$(this).serialize(),success:function(t){$("#add_class_modal").modal("hide"),notif("Success!","Record has been saved to the Database!","success","glyphicon-ok"),a.disabled=!1,e.html("SAVE CHANGES"),f()},error:function(t){swal("Error!","Something went wrong, please contact IT Officer.","error"),a.disabled=!1,e.html("SAVE CHANGES")}})}),$(document).on("submit","#edit_class_form",function(t){t.preventDefault();var e=$(".e_save_class"),a=document.getElementsByClassName("e_save_class")[0];a.disabled=!0,e.html("SAVING..."),$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/edit_class",method:"POST",data:$(this).serialize(),success:function(t){notif("Success!","Record has been saved to the Database!","success","glyphicon-ok"),a.disabled=!1,e.html("SAVE CHANGES"),f()},error:function(t){swal("Error!","Something went wrong, please contact IT Officer.","error"),a.disabled=!1,e.html("SAVE CHANGES")}})}),$(document).on("submit","#edit_student_date_form",function(t){t.preventDefault();var e=$(".save_edit_student_date"),a=document.getElementsByClassName("save_edit_student_date")[0];a.disabled=!0,e.html("SAVING..."),$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/edit_student_date",method:"POST",data:$(this).serialize(),success:function(t){$("#edit_student_date_modal").modal("hide"),notif("Success!","Record has been saved to the Database!","success","glyphicon-ok"),a.disabled=!1,e.html("SAVE CHANGES"),f()},error:function(t){swal("Error!","Something went wrong, please contact IT Officer.","error"),a.disabled=!1,e.html("SAVE CHANGES")}})}),$(".assign_student_class").on("click",function(){$("#assign_student_class_modal").modal("toggle"),$("#assign_student_class_modal").modal("show")}),$(".completeCheck").change(function(){$("#sensei_class, #date_class, #current_student_class, #class_students_id, #current_end_date").val("").trigger("change"),$("#date_class, #student_class, #current_end_date").prop("disabled",!0),$(this).is(":checked")?(s=!0,g()):(s=!1,g())}),$("#sensei_class").change(function(){$("#date_class, #student_class, #current_student_class, #class_students_id, #current_end_date").val("").trigger("change"),$("#date_class").prop("disabled",!1),$("#student_class, #current_end_date").prop("disabled",!0),e=$(this).val(),$("#date_class").select2({placeholder:"Select Class",ajax:{url:"/dateClass",dataType:"json",data:function(t){return{completeCheck:s,sensei:e,name:t.term,page:t.page}},processResults:function(t){return{results:t.results}}}})}),$("#date_class").change(function(){$(this).val(),$(this).val()&&($("#student_class, #current_student_class, #class_students_id, #current_end_date").val("").trigger("change"),$("#student_class").val("").prop("disabled",!1),$("#current_end_date").prop("disabled",!0)),$("#student_class").select2({placeholder:"Select Student",ajax:{url:"/studentClass",dataType:"json",data:function(t){return{name:t.term,page:t.page}},processResults:function(t){return{results:t.results}}}})}),$("#student_class").change(function(){$(this).val()&&(a=$(this).val(),$.ajax({url:"/check_student_class/"+a,method:"get",dataType:"json",success:function(t){0!=t?($("#current_student_class").val(t.current_class.start_date+" ~ "+(t.current_class.end_date?t.current_class.end_date:"TBD")+" ("+t.current_class.sensei.fname+" "+t.current_class.sensei.lname+")"),$("#current_end_date").val("").prop("disabled",!1),$("#class_students_id").val(t.id)):($("#current_student_class").val("No Current Class"),$("#current_end_date").val("").prop("disabled",!0),$("#class_students_id").val(""))}}))}),$(document).on("submit","#assign_student_class_form",function(t){t.preventDefault();var e=$(".save_assign"),a=document.getElementsByClassName("save_assign")[0];a.disabled=!0,e.html("SAVING..."),$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/assign_student_class",data:$(this).serialize(),dataType:"text",success:function(t){if("assigned"==t)return swal("Error!","Student already assigned to this class.","error"),a.disabled=!1,void e.html("SAVE CHANGES");$("#assign_continuous").is(":checked")?o():$("#assign_student_class_modal").modal("hide"),notif("Success!","Record has been saved to the Database!","success","glyphicon-ok"),f(),a.disabled=!1,e.html("SAVE CHANGES")},error:function(t){swal("Error!","Something went wrong, please contact IT Officer.","error"),a.disabled=!1,e.html("SAVE CHANGES")}})}),$(document).on("click",".delete_class",function(){swal.fire({title:"Confirm User",text:"For security purposes, input your password again.",input:"password",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Confirm",showLoaderOnConfirm:!0,preConfirm:function(t){$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/confirm_user",data:{password:t},method:"POST",success:function(e){0!=e?swal({title:"Warning",text:"Deleting this class will clear all data for this class.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(e){e.value&&$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/delete_class",data:{current_class_select:l,password:t},method:"get",type:"json",success:function(t){$(".tab_pick a:first").tab("show"),c="Students",l=0,notif("Success!","This class has been Deleted","success","glyphicon-ok"),f()}})}):swal("Password Incorrect!","Please try again","error")}})}})}),$(document).on("click",".end_class",function(){swal({title:"End Class?",text:"This will put an End Date on all students under this class.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!"}).then(function(t){t.value&&$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/end_class",data:{current_class_select:l},method:"get",type:"json",success:function(t){notif("Success!","This class has ended","success","glyphicon-ok"),f()}})})}),$(document).on("click",".remove_student_class",function(){var t=$(this).attr("id");swal({title:"Are you sure?",text:"You are about to remove a student from this class.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!"}).then(function(e){e.value&&$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/remove_student_class/"+t,type:"json",method:"get",success:function(t){notif("Success!","This Student has been removed from this class","success","glyphicon-ok"),f()}})})}),$(document).on("click",".view_class_history",function(){var t=$(this).attr("id");$.ajax({url:"/student_class_name/"+t,method:"get",type:"json",success:function(e){$("#student_class_history_modal").modal("toggle"),$("#student_class_history_modal").modal("show"),$("#student_class_name").html(e),function(t){$("#student_class_history_table").DataTable({stateSave:!0,stateSaveCallback:function(t,e){localStorage.setItem("DataTables_"+t.sInstance,JSON.stringify(e))},stateLoadCallback:function(t){return JSON.parse(localStorage.getItem("DataTables_"+t.sInstance))},initComplete:function(t,e){d()},processing:!0,destroy:!0,scrollX:!0,scrollCollapse:!0,responsive:!0,ajax:{url:"/view_student_class_history/"+t},columnDefs:[{defaultContent:"",targets:"_all"}],columns:m,order:[[2,"desc"]]})}(t)}})}),g(),$(document).on("click",".class_pick",function(){l&&$(".class_pick#"+l).css("background-color",""),$(this).css("background-color","#FEFAD4"),l=$(this).attr("id"),f()}),$(document).on("click",".class_nav_box",function(){$(".class_nav_box").attr("disabled",!1),$(this).attr("disabled",!0),n=$(this).find("b").text(),p()}),$(document).on("click",".refresh_table",function(){f()}),f(),$(document).on("click",".tab_pick",function(){$(this).hasClass("disabled")||(c=$(this).text(),f())})})}});