!function(e){var t={};function a(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=10)}({10:function(e,t,a){e.exports=a("8/vy")},"8/vy":function(e,t){$(document).ready(function(){var e,t,a,s=!1,n="Ongoing",l=0,c="Students";function o(){$("#assign_student_class_form :input.required").each(function(){this.style.setProperty("border-color","green","important")}),$("#assign_student_class_modal").find(".select2, input").val("").end(),$("#assign_student_class_modal").find("#date_class, #student_class").prop("disabled",!0),$(".completeCheck").prop("checked",!1),s=!1,$(".select2").trigger("change.select2")}function d(){0!=l?($("li.tab_pick, .class_pick").removeClass("disabled").css("cursor","pointer"),$("a.tab_pick, .class_pick").removeClass("disabled").css("pointer-events","auto"),$.ajax({url:"/get_class_settings/"+l,method:"get",dataType:"json",success:function(e){$("#e_sensei").val(e.sensei_id).trigger("change"),$("#e_start_date").val(e.start_date),$("#e_end_date").val(e.end_date),$("#edit_class_id").val(e.id);for(var t=0;t<6;t++)e.class_day[t].start_time_id&&($($(".editCheck")[t]).prop("checked",!0),$($(".edit_start_time")[t]).prop("readonly",!1),$($(".edit_end_time")[t]).prop("readonly",!1),$($(".edit_start_time")[t]).val(e.class_day[t].start_time.name),e.class_day[t].end_time&&$($(".edit_end_time")[t]).val(e.class_day[t].end_time.name));$("#e_end_date").val()?$(".end_class").prop("disabled",!1):$(".end_class").prop("disabled",!0),$("#e_remarks").val(e.remarks)}})):($("li.stud_pick, .class_pick").removeClass("disabled").css("cursor","pointer"),$("a.stud_pick, .class_pick").removeClass("disabled").css("pointer-events","auto")),$(".refresh_table").attr("disabled",!1)}$(".datepicker").datepicker({format:"yyyy-mm-dd",forceParse:!1}),$(".timepicker").timepicker({showSeconds:!1,showMeridian:!1,defaultTime:!1,showInputs:!1,pickTime:!1,template:!1}),$(".select2").select2(),$("#date_class").select2({placeholder:"Select Class"}),$("#student_class").select2({placeholder:"Select Student"}),$("body").tooltip({selector:'[data-toggle="tooltip"]',trigger:"hover"}),$('[data-toggle="tooltip"]').click(function(){$('[data-toggle="tooltip"]').tooltip("hide")}),$("input, select").attr("autocomplete","off"),$("#add_class_modal").on("hidden.bs.modal",function(e){$("#add_class_form :input.required").each(function(){this.style.setProperty("border-color","green","important")}),$(this).find(".add_start_time, .add_end_time, #start_date, #end_date, #remarks, select").val("").end(),$(this).find(".add_start_time, .add_end_time").prop("readonly",!0),$(".addCheck").prop("checked",!1),$(".select2").trigger("change.select2")}),$("#assign_student_class_modal").on("hidden.bs.modal",function(e){o(),$("#assign_continuous").bootstrapToggle("off")}),$("#assign_continuous").bootstrapToggle("off"),$(document).on("shown.bs.tab",'a[data-toggle="tab"]',function(e){$.fn.dataTable.tables({visible:!0,api:!0}).columns.adjust()});var r=[{data:"name",name:"name"},{data:"student.contact",name:"contact"},{data:"student.program.name",name:"program"},{data:"departure",name:"departure"},{data:"student.status",name:"status"},{data:"class_status",name:"class_status"},{data:"start_date",name:"start_date"},{data:"end_date",name:"end_date"},{data:"action",orderable:!1,searchable:!1}],i=[{data:"name",name:"name"},{data:"contact",name:"contact"},{data:"program.name",name:"program"},{data:"departure",name:"departure"},{data:"status",name:"status"},{data:"class_status",name:"class_status"},{data:"action",name:"action"}],u=[{data:"name",name:"name"},{data:"contact",name:"contact"},{data:"program.name",name:"program"},{data:"departure",name:"departure"},{data:"status",name:"status"}],_=[{data:"name",name:"name"},{data:"contact",name:"contact"},{data:"program.name",name:"program"},{data:"departure",name:"departure"},{data:"status",name:"status"},{data:"class_status",name:"class_status"}],m=[{data:"sensei",name:"sensei"},{data:"start_date",name:"start_date"},{data:"end_date",name:"end_date"},{data:"current_class.remarks",name:"remarks"}];function p(){$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/get_class/"+n,method:"get",dataType:"json",success:function(e){$("#class_box").empty();var t="";t+='<ul class="list-group list-group-unbordered">';for(var a=0;a<e.class_settings.length;a++){for(var s=!0,n="",c=0;c<6;c++)e.class_settings[a].class_day[c].start_time&&(0==s&&(n+=" â€¢ "),n+='<span data-container="body" data-toggle="tooltip" \n                            data-placement="top"\n                            title="'+e.class_settings[a].class_day[c].start_time.name+" ~ "+(e.class_settings[a].class_day[c].end_time?e.class_settings[a].class_day[c].end_time.name:"TBD")+'">'+e.class_settings[a].class_day[c].day_name.abbrev+"</span>",s=!1);t+='\n                    <li class="list-group-item class_pick" id="'+e.class_settings[a].id+'">\n                        <p class="class_get_id" style="word-wrap: break-word;">Class ID: '+e.class_settings[a].id+" | "+e.class_settings[a].start_date+" ~ "+(e.class_settings[a].end_date?e.class_settings[a].end_date:"TBD")+"<br><b>"+e.class_settings[a].sensei.fname+" "+e.class_settings[a].sensei.lname+'</b><br><span style="cursor:help;">'+n+'<br><span class="label label-success" data-container="body" data-toggle="tooltip" data-placement="top" title="Complete">'+e.class_settings[a].complete+'</span>&nbsp;<span class="label label-danger" data-container="body" data-toggle="tooltip" data-placement="top" title="Back Out">'+e.class_settings[a].backout+'</span>&nbsp;<span class="label label-info" data-container="body" data-toggle="tooltip" data-placement="top" title="Active">'+e.class_settings[a].active+'</span>&nbsp;<span class="label label-warning" data-container="body" data-toggle="tooltip" data-placement="top" title="No. of Students">'+e.class_settings[a].all+"</span><br><span> Remarks: "+(e.class_settings[a].remarks?e.class_settings[a].remarks:"")+"</span></p>\n                    </li>"}t+="</ul>",$("#on_going_class_box span").text(e.on_going),$("#complete_class_box span").text(e.completed),$("#all_class_box span").text(e.all),$("#class_box").append(t),0!=l&&$(".class_pick#"+l).css("background-color","#FEFAD4")}})}function g(){$("#sensei_class").select2({placeholder:"Select Sensei",ajax:{url:"/senseiClass/"+s,dataType:"json",data:function(e){return{name:e.term,page:e.page}},processResults:function(e){return{results:e.results}}}})}function f(){switch($("li.tab_pick, .class_pick").addClass("disabled").css("cursor","not-allowed"),$("a.tab_pick, .class_pick").addClass("disabled").css("pointer-events","none"),$(".refresh_table").attr("disabled",!0),$("#edit_class_form").find(".edit_start_time, .edit_end_time, #e_start_date, #e_end_date, #e_remarks, select").val("").end(),$("#edit_class_form").find(".edit_start_time, .edit_end_time").prop("readonly",!0),$(".editCheck").prop("checked",!1),$(".select2").trigger("change.select2"),p(),c){case"Students":$("#student_class_table").DataTable({stateSave:!0,stateSaveCallback:function(e,t){localStorage.setItem("DataTables_"+e.sInstance,JSON.stringify(t))},stateLoadCallback:function(e){return JSON.parse(localStorage.getItem("DataTables_"+e.sInstance))},initComplete:function(e,t){d()},processing:!0,destroy:!0,scrollX:!0,scrollCollapse:!0,fixedColumns:!0,responsive:!0,ajax:{url:"/class_students",data:{current_class_select:l}},columnDefs:[{defaultContent:"",targets:"_all"}],columns:r});break;case"With Classes":$("#student_with_class_table").DataTable({stateSave:!0,stateSaveCallback:function(e,t){localStorage.setItem("DataTables_"+e.sInstance,JSON.stringify(t))},stateLoadCallback:function(e){return JSON.parse(localStorage.getItem("DataTables_"+e.sInstance))},initComplete:function(e,t){d()},processing:!0,destroy:!0,scrollX:!0,scrollCollapse:!0,fixedColumns:!0,responsive:!0,ajax:{url:"/with_class_students"},columnDefs:[{defaultContent:"",targets:"_all"}],columns:i});break;case"No Classes":$("#student_no_class_table").DataTable({stateSave:!0,stateSaveCallback:function(e,t){localStorage.setItem("DataTables_"+e.sInstance,JSON.stringify(t))},stateLoadCallback:function(e){return JSON.parse(localStorage.getItem("DataTables_"+e.sInstance))},initComplete:function(e,t){d()},processing:!0,destroy:!0,scrollX:!0,scrollCollapse:!0,fixedColumns:!0,responsive:!0,ajax:{url:"/no_class_students"},columnDefs:[{defaultContent:"",targets:"_all"}],columns:u});break;case"All":$("#student_all_class_table").DataTable({stateSave:!0,stateSaveCallback:function(e,t){localStorage.setItem("DataTables_"+e.sInstance,JSON.stringify(t))},stateLoadCallback:function(e){return JSON.parse(localStorage.getItem("DataTables_"+e.sInstance))},initComplete:function(e,t){d()},processing:!0,destroy:!0,scrollX:!0,scrollCollapse:!0,fixedColumns:!0,responsive:!0,ajax:{url:"/all_class_students"},columnDefs:[{defaultContent:"",targets:"_all"}],columns:_});break;default:d()}}$(".addCheck").change(function(){e=$(this).next().val(),startTimeInput=document.getElementsByClassName("add_start_time")[e-1],endTimeInput=document.getElementsByClassName("add_end_time")[e-1],$(this).is(":checked")?$([startTimeInput,endTimeInput]).prop("readonly",!1):($([startTimeInput,endTimeInput]).prop("readonly",!0),$([startTimeInput,endTimeInput]).val(""))}),$(".editCheck").change(function(){e=$(this).next().val(),startTimeInput=document.getElementsByClassName("edit_start_time")[e-1],endTimeInput=document.getElementsByClassName("edit_end_time")[e-1],$(this).is(":checked")?$([startTimeInput,endTimeInput]).prop("readonly",!1):($([startTimeInput,endTimeInput]).prop("readonly",!0),$([startTimeInput,endTimeInput]).val(""))}),$(".add_class").on("click",function(){$("#add_class_modal").modal("toggle"),$("#add_class_modal").modal("show")}),$(document).on("click",".edit_student_date",function(){var e=$(this).attr("id");$.ajax({url:"/get_student_date/"+e,method:"get",dataType:"json",success:function(e){$("#edit_student_class_id").val(e.id),$("#student_name_temp").val(e.student.lname+", "+e.student.fname),$("#e_student_start_date").val(e.start_date),$("#e_student_end_date").val(e.end_date),e.end_date?($("#e_student_end_date").attr("required",!0),$("#e_student_end_date").addClass("required")):($("#e_student_end_date").attr("required",!1),$("#e_student_end_date").removeClass("required")),$("#edit_student_date_modal").modal("toggle"),$("#edit_student_date_modal").modal("show")}})}),$(document).on("submit","#add_class_form",function(e){e.preventDefault();var t=$(".save_class"),a=document.getElementsByClassName("save_class")[0];a.disabled=!0,t.html("SAVING..."),$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/add_class",method:"POST",data:$(this).serialize(),success:function(e){$("#add_class_modal").modal("hide"),notif("Success!","Record has been saved to the Database!","success","glyphicon-ok"),a.disabled=!1,t.html("SAVE CHANGES"),f()},error:function(e){swal("Error!","Something went wrong, try again.","error"),a.disabled=!1,t.html("SAVE CHANGES")}})}),$(document).on("submit","#edit_class_form",function(e){e.preventDefault();var t=$(".e_save_class"),a=document.getElementsByClassName("e_save_class")[0];a.disabled=!0,t.html("SAVING..."),$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/edit_class",method:"POST",data:$(this).serialize(),success:function(e){notif("Success!","Record has been saved to the Database!","success","glyphicon-ok"),a.disabled=!1,t.html("SAVE CHANGES"),f()},error:function(e){swal("Error!","Something went wrong, try again.","error"),a.disabled=!1,t.html("SAVE CHANGES")}})}),$(document).on("submit","#edit_student_date_form",function(e){e.preventDefault();var t=$(".save_edit_student_date"),a=document.getElementsByClassName("save_edit_student_date")[0];a.disabled=!0,t.html("SAVING..."),$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/edit_student_date",method:"POST",data:$(this).serialize(),success:function(e){$("#edit_student_date_modal").modal("hide"),notif("Success!","Record has been saved to the Database!","success","glyphicon-ok"),a.disabled=!1,t.html("SAVE CHANGES"),f()},error:function(e){swal("Error!","Something went wrong, try again.","error"),a.disabled=!1,t.html("SAVE CHANGES")}})}),$(".assign_student_class").on("click",function(){$("#assign_student_class_modal").modal("toggle"),$("#assign_student_class_modal").modal("show")}),$(".completeCheck").change(function(){$("#sensei_class, #date_class, #current_student_class, #class_students_id, #current_end_date").val("").trigger("change"),$("#date_class, #student_class, #current_end_date").prop("disabled",!0),$(this).is(":checked")?(s=!0,g()):(s=!1,g())}),$("#sensei_class").change(function(){$("#date_class, #student_class, #current_student_class, #class_students_id, #current_end_date").val("").trigger("change"),$("#date_class").prop("disabled",!1),$("#student_class, #current_end_date").prop("disabled",!0),t=$(this).val(),$("#date_class").select2({placeholder:"Select Class",ajax:{url:"/dateClass",dataType:"json",data:function(e){return{completeCheck:s,sensei:t,name:e.term,page:e.page}},processResults:function(e){return{results:e.results}}}})}),$("#date_class").change(function(){$(this).val(),$(this).val()&&($("#student_class, #current_student_class, #class_students_id, #current_end_date").val("").trigger("change"),$("#student_class").val("").prop("disabled",!1),$("#current_end_date").prop("disabled",!0)),$("#student_class").select2({placeholder:"Select Student",ajax:{url:"/studentClass",dataType:"json",data:function(e){return{name:e.term,page:e.page}},processResults:function(e){return{results:e.results}}}})}),$("#student_class").change(function(){$(this).val()&&(a=$(this).val(),$.ajax({url:"/check_student_class/"+a,method:"get",dataType:"json",success:function(e){0!=e?($("#current_student_class").val(e.current_class.start_date+" ~ "+(e.current_class.end_date?e.current_class.end_date:"TBD")+" ("+e.current_class.sensei.fname+" "+e.current_class.sensei.lname+")"),$("#current_end_date").val("").prop("disabled",!1),$("#class_students_id").val(e.id)):($("#current_student_class").val("No Current Class"),$("#current_end_date").val("").prop("disabled",!0),$("#class_students_id").val(""))}}))}),$(document).on("submit","#assign_student_class_form",function(e){e.preventDefault();var t=$(".save_assign"),a=document.getElementsByClassName("save_assign")[0];a.disabled=!0,t.html("SAVING..."),$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/assign_student_class",data:$(this).serialize(),dataType:"text",success:function(e){if("assigned"==e)return swal("Error!","Student already assigned to this class.","error"),a.disabled=!1,void t.html("SAVE CHANGES");$("#assign_continuous").is(":checked")?o():$("#assign_student_class_modal").modal("hide"),notif("Success!","Record has been saved to the Database!","success","glyphicon-ok"),f(),a.disabled=!1,t.html("SAVE CHANGES")},error:function(e){swal("Error!","Something went wrong, try again.","error"),a.disabled=!1,t.html("SAVE CHANGES")}})}),$(document).on("click",".delete_class",function(){swal.fire({title:"Confirm User",text:"For security purposes, input your password again.",input:"password",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Confirm",showLoaderOnConfirm:!0,preConfirm:function(e){$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/confirm_user",data:{password:e},method:"POST",success:function(t){0!=t?swal({title:"Warning",text:"Deleting this class will clear all data for this class.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(t){t.value&&$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/delete_class",data:{current_class_select:l,password:e},method:"get",type:"json",success:function(e){$(".tab_pick a:first").tab("show"),c="Students",l=0,notif("Success!","This class has been Deleted","success","glyphicon-ok"),f()}})}):swal("Password Incorrect!","Please try again","error")}})}})}),$(document).on("click",".end_class",function(){swal({title:"End Class?",text:"This will put an End Date on all students under this class.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!"}).then(function(e){e.value&&$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/end_class",data:{current_class_select:l},method:"get",type:"json",success:function(e){notif("Success!","This class has ended","success","glyphicon-ok"),f()}})})}),$(document).on("click",".remove_student_class",function(){var e=$(this).attr("id");swal({title:"Are you sure?",text:"You are about to remove a student from this class.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes!"}).then(function(t){t.value&&$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/remove_student_class/"+e,type:"json",method:"get",success:function(e){notif("Success!","This Student has been removed from this class","success","glyphicon-ok"),f()}})})}),$(document).on("click",".view_class_history",function(){var e=$(this).attr("id");$.ajax({url:"/student_class_name/"+e,method:"get",type:"json",success:function(t){$("#student_class_history_modal").modal("toggle"),$("#student_class_history_modal").modal("show"),$("#student_class_name").html(t),function(e){$("#student_class_history_table").DataTable({stateSave:!0,stateSaveCallback:function(e,t){localStorage.setItem("DataTables_"+e.sInstance,JSON.stringify(t))},stateLoadCallback:function(e){return JSON.parse(localStorage.getItem("DataTables_"+e.sInstance))},initComplete:function(e,t){d()},processing:!0,destroy:!0,scrollX:!0,scrollCollapse:!0,responsive:!0,ajax:{url:"/view_student_class_history/"+e},columnDefs:[{defaultContent:"",targets:"_all"}],columns:m,order:[[2,"desc"]]})}(e)}})}),g(),$(document).on("click",".class_pick",function(){l&&$(".class_pick#"+l).css("background-color",""),$(this).css("background-color","#FEFAD4"),l=$(this).attr("id"),f()}),$(document).on("click",".class_nav_box",function(){$(".class_nav_box").attr("disabled",!1),$(this).attr("disabled",!0),n=$(this).find("b").text(),p()}),$(document).on("click",".refresh_table",function(){f()}),f(),$(document).on("click",".tab_pick",function(){$(this).hasClass("disabled")||(c=$(this).text(),f())})})}});