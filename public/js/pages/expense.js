!function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=11)}({11:function(e,t,a){e.exports=a("SKlm")},SKlm:function(e,t){$(document).ready(function(){var e="Expense",t=!0,a="All",n="All";$(".select2").select2(),$("input, select").attr("autocomplete","off"),$("body").tooltip({selector:'[data-toggle="tooltip"]',trigger:"hover"});var o=new Date,r=String(o.getDate()).padStart(2,"0"),s=String(o.getMonth()+1).padStart(2,"0"),l=o.getFullYear();o=s+"/"+r+"/"+l,today_converted=l+"-"+s+"-"+r;var c=today_converted,i=today_converted;function d(){$("#expense_form :input.required").each(function(){this.style.setProperty("border-color","green","important")}),$("#expense_modal").find("input,textarea,select").val("").end(),$(".select2").trigger("change.select2")}function u(){$("li.expense_pick").removeClass("disabled").css("cursor","pointer"),$("a.expense_pick").removeClass("disabled").css("pointer-events","auto"),$(".refresh_table").attr("disabled",!1)}function p(){$("li.expense_pick").addClass("disabled").css("cursor","not-allowed"),$("a.expense_pick").addClass("disabled").css("pointer-events","none"),$(".refresh_table").attr("disabled",!0),"Expense"==e?$("#expense_table").DataTable({initComplete:function(e,t){u()},dom:"Bflrtip",buttons:[{extend:"excelHtml5",title:"Expense",exportOptions:{columns:":visible"},footer:!0},"colvis"],processing:!0,destroy:!0,scrollX:!0,scrollCollapse:!0,fixedColumns:{leftColumns:2},responsive:!0,ajax:{url:"/view_expense",data:{start_date:c,end_date:i,date_counter:t,branch:a,company:n}},columns:[{data:"type.name",name:"type"},{data:"particular",name:"particular"},{data:"branch.name",name:"branch"},{data:"company_type.name",name:"company"},{data:"date",name:"date"},{data:"amount",name:"amount"},{data:"vat",name:"vat"},{data:"input_tax",name:"input_tax"},{data:"check_voucher",name:"check_voucher"},{data:"remarks",name:"remarks"},{data:"action",orderable:!1,searchable:!1}],columnDefs:[{defaultContent:"",targets:"_all"}],order:[4,"desc"],footerCallback:function(e,t,a,n,o){var r=this.api(),s=function(e){return"string"==typeof e?1*e.replace(/[\$,]/g,""):"number"==typeof e?e:0};total=r.column(5).data().reduce(function(e,t){return s(e)+s(t)},0),total2=r.column(7).data().reduce(function(e,t){return s(e)+s(t)},0),pageTotal=r.column(5,{page:"current"}).data().reduce(function(e,t){return s(e)+s(t)},0),$(r.column(5).footer()).html("₱"+total.toFixed(2)),pageTotal2=r.column(7,{page:"current"}).data().reduce(function(e,t){return s(e)+s(t)},0),$(r.column(7).footer()).html("₱"+total2.toFixed(2))}}):"Type"==e?$("#type_table").DataTable({initComplete:function(e,t){u()},dom:"Bflrtip",buttons:[{extend:"excelHtml5",title:"Expense Type",exportOptions:{columns:":visible"},footer:!0},"colvis"],processing:!0,destroy:!0,scrollX:!0,scrollCollapse:!0,responsive:!0,ajax:{url:"/view_expense_type",data:{start_date:c,end_date:i,date_counter:t,branch:a,company:n}},columns:[{data:"name",name:"name"},{data:"total",name:"total"},{data:"action",orderable:!1,searchable:!1}],columnDefs:[{defaultContent:"",targets:"_all"}],footerCallback:function(e,t,a,n,o){var r=this.api(),s=function(e){return"string"==typeof e?1*e.replace(/[\$,]/g,""):"number"==typeof e?e:0};total=r.column(1).data().reduce(function(e,t){return s(e)+s(t)},0),pageTotal=r.column(1,{page:"current"}).data().reduce(function(e,t){return s(e)+s(t)},0),$(r.column(1).footer()).html("₱"+total.toFixed(2))}}):"Particular"==e?$("#particular_table").DataTable({initComplete:function(e,t){u()},processing:!0,destroy:!0,scrollX:!0,scrollCollapse:!0,responsive:!0,ajax:{url:"/view_expense_particular"},columns:[{data:"name",name:"name"},{data:"tin",name:"tin"},{data:"address",name:"address"},{data:"action",orderable:!1,searchable:!1}],columnDefs:[{defaultContent:"",targets:"_all"}]}):$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/view_cash_disbursement",data:{start_date:c,end_date:i,date_counter:t,branch:a,company:n},method:"get",dataType:"json",success:function(e){$("#cash_disbursement_table").empty();var t="",a="",n="";t+="<thead>";for(var o=0;o<e.expense_type.length;o++)a+='<th class="expense_types">'+e.expense_type[o].name+"</th>",n+='<th class="expense_types">'+e.expense_type[o].expense_type_total+"</th>";t+='\n                <tr>\n                    <th rowspan="2" style="width: 100px;">Date</th>\n                    <th rowspan="2" style="width: 130px;">Check Voucher</th>\n                    <th rowspan="2" style="width: 350px;">Particulars</th>\n                    <th rowspan="2" style="width: 130px;">TIN Number</th>\n                    <th rowspan="2" style="width: 350px;">Address</th>\n                    <th style="width: 150px;">Total Invoice</th>\n                    <th style="width: 150px;">Non Vat</th>\n                    <th style="width: 150px;">Vatable Amount</th>\n                    <th style="width: 150px;">Input Tax</th>'+a+"</tr>\n                <tr>\n                    <th>"+e.total+"</th>\n                    <th>"+e.non_vat+"</th>\n                    <th>"+e.vat+"</th>\n                    <th>"+e.input_tax+"</th>"+n+"</tr>",t+="</thead>",t+="<tbody>";for(var r=0;r<e.expense.length;r++){for(var s="",l=0;l<e.expense_type.length;l++)s+="<td>"+e.expense_particular_type_total[r][l]+"</td>";t+="<tr><td>"+e.expense[r].date+"</td><td>"+(e.expense[r].check_voucher?e.expense[r].check_voucher:"")+"</td><td>"+e.expense[r].particular.name+"</td><td>"+(e.expense[r].particular.tin?e.expense[r].particular.tin:"")+"</td><td>"+(e.expense[r].particular.address?e.expense[r].particular.address:"")+"</td><td>"+e.expense[r].total_invoice+"</td><td>"+e.expense[r].non_vat_total+"</td><td>"+e.expense[r].vat_total+"</td><td>"+e.expense[r].input_tax_total+"</td>"+s+"</tr>"}t+="</tbody>",$("#cash_disbursement_table").append(t),$("#cash_disbursement_table").tableExport({position:"top",formats:["xlsx"],bootstrap:!0}),u()}})}$("#daterange").daterangepicker({showDropdowns:!0,linkedCalendars:!1,startDate:o,endDate:o},function(e,t){c=e.format("YYYY-MM-DD"),i=t.format("YYYY-MM-DD"),p()}),$(document).on("change","#date_counter",function(){t=!!$(this).is(":checked"),p()}),$("#expense_type_modal").on("hidden.bs.modal",function(e){$("#expense_type_form :input.required").each(function(){this.style.setProperty("border-color","green","important")}),$(this).find("input,textarea,select").val("").end()}),$("#expense_particular_modal").on("hidden.bs.modal",function(e){$("#expense_particular_form :input.required").each(function(){this.style.setProperty("border-color","green","important")}),$(this).find("input,textarea,select").val("").end()}),$("#expense_modal").on("hidden.bs.modal",function(e){d(),$("#expense_continuous").bootstrapToggle("off")}),$("#expense_continuous").bootstrapToggle("off"),$(".company_type_select, .branch_select").show(),$("#company_type_select, #branch_select").next(".select2-container").show(),$(".refresh_table").on("click",function(){p()}),$(document).on("shown.bs.tab",'a[data-toggle="tab"]',function(e){p(),$.fn.dataTable.tables({visible:!0,api:!0}).columns.adjust()}),p(),$.fn.dataTable.tables({visible:!0,api:!0}).columns.adjust(),$(document).on("click",".expense_pick",function(){e=$(this).text()}),$(document).on("click",".add_expense",function(){"Particular"==e?($("#p_add_edit").val("add"),$("#expense_particular_modal").modal("toggle"),$("#expense_particular_modal").modal("show")):"Type"==e?($("#t_add_edit").val("add"),$("#expense_type_modal").modal("toggle"),$("#expense_type_modal").modal("show")):($("#e_add_edit").val("add"),$("#expense_modal").modal("toggle"),$("#expense_modal").modal("show"))}),$(document).on("click",".edit_expense_type",function(){var e=$(this).attr("id");$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/get_expense_type/"+e,method:"get",dataType:"json",success:function(e){$("#t_id").val(e.id),$("#t_add_edit").val("edit"),$("#expense_type_name").val(e.name),$("#expense_type_modal").modal("show")}})}),$(document).on("click",".edit_expense_particular",function(){var e=$(this).attr("id");$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/get_expense_particular/"+e,method:"get",dataType:"json",success:function(e){$("#p_id").val(e.id),$("#p_add_edit").val("edit"),$("#expense_particular_name").val(e.name),$("#expense_particular_tin").val(e.tin),$("#expense_particular_address").val(e.address),$("#expense_particular_modal").modal("show")}})}),$(document).on("click",".edit_expense",function(){var e=$(this).attr("id");$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/get_expense/"+e,method:"get",dataType:"json",success:function(e){$("#e_id").val(e.id),$("#e_add_edit").val("edit"),$("#expense_type").val(e.expense_type_id).trigger("change"),$("#expense_particular").val(e.expense_particular_id).trigger("change"),$("#branch").val(e.branch_id).trigger("change"),$("#company_type").val(e.lead_company_type_id).trigger("change"),$("#date").val(e.date),$("#amount").val(e.amount),$("#vat").val(e.vat).trigger("change"),$("#input_tax").val(e.input_tax),$("#check_voucher").val(e.check_voucher),$("#remarks").val(e.remarks),$("#expense_modal").modal("show")}})}),$(document).on("submit","#expense_type_form",function(e){e.preventDefault();var t=$(".save_expense_type"),a=document.getElementsByClassName("save_expense_type")[0];a.disabled=!0,t.html("SAVING..."),$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/save_expense_type",method:"POST",data:$(this).serialize(),success:function(e){notif("Success!","Record has been saved to the Database!","success","glyphicon-ok"),$("#expense_type_modal").modal("hide"),a.disabled=!1,t.html("SAVE CHANGES"),p()},error:function(e){swal("Error!","Something went wrong, try again.","error"),a.disabled=!1,t.html("SAVE CHANGES")}})}),$(document).on("submit","#expense_particular_form",function(e){e.preventDefault();var t=$(".save_expense_particular"),a=document.getElementsByClassName("save_expense_particular")[0];a.disabled=!0,t.html("SAVING..."),$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/save_expense_particular",method:"POST",data:$(this).serialize(),success:function(e){notif("Success!","Record has been saved to the Database!","success","glyphicon-ok"),$("#expense_particular_modal").modal("hide"),a.disabled=!1,t.html("SAVE CHANGES"),p()},error:function(e){swal("Error!","Something went wrong, try again.","error"),a.disabled=!1,t.html("SAVE CHANGES")}})}),$(document).on("submit","#expense_form",function(e){e.preventDefault();var t=$(".save_expense"),a=document.getElementsByClassName("save_expense")[0];a.disabled=!0,t.html("SAVING..."),$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/save_expense",method:"POST",data:$(this).serialize(),success:function(e){notif("Success!","Record has been saved to the Database!","success","glyphicon-ok"),$("#expense_continuous").is(":checked")?(d(),$("#e_add_edit").val("add")):$("#expense_modal").modal("hide"),a.disabled=!1,t.html("SAVE CHANGES"),p()},error:function(e){swal("Error!","Something went wrong, try again.","error"),a.disabled=!1,t.html("SAVE CHANGES")}})}),$(document).on("click",".delete_expense_type",function(){var e=$(this).attr("id");swal.fire({title:"Confirm User",text:"For security purposes, input your password again.",input:"password",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Confirm",showLoaderOnConfirm:!0,preConfirm:function(t){$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/confirm_user",data:{password:t},method:"POST",success:function(a){0!=a?swal({title:"Warning",text:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(a){a.value&&$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/delete_expense_type",data:{id:e,password:t},method:"get",type:"json",success:function(e){notif("Success!","This expense type has been Deleted","success","glyphicon-ok"),p()}})}):swal("Password Incorrect!","Please try again","error")}})}})}),$(document).on("click",".delete_expense_particular",function(){var e=$(this).attr("id");swal.fire({title:"Confirm User",text:"For security purposes, input your password again.",input:"password",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Confirm",showLoaderOnConfirm:!0,preConfirm:function(t){$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/confirm_user",data:{password:t},method:"POST",success:function(a){0!=a?swal({title:"Warning",text:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(a){console.log(t),a.value&&$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/delete_expense_particular",data:{id:e,password:t},method:"get",type:"json",success:function(e){console.log("nadelete na"),notif("Success!","This expense particular has been Deleted","success","glyphicon-ok"),p()}})}):swal("Password Incorrect!","Please try again","error")}})}})}),$(document).on("click",".delete_expense",function(){var e=$(this).attr("id");swal.fire({title:"Confirm User",text:"For security purposes, input your password again.",input:"password",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Confirm",showLoaderOnConfirm:!0,preConfirm:function(t){$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/confirm_user",data:{password:t},method:"POST",success:function(a){0!=a?swal({title:"Warning",text:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(a){a.value&&$.ajax({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")},url:"/delete_expense",data:{id:e,password:t},method:"get",type:"json",success:function(e){notif("Success!","This expense has been Deleted","success","glyphicon-ok"),p()}})}):swal("Password Incorrect!","Please try again","error")}})}})}),$("#amount").keyup(function(){"VAT"==$("#vat").val()?$("#input_tax").val(parseFloat($(this).val()/1.12*.12).toFixed(2)):$("#input_tax").val(0)}),$(document).on("change","#vat",function(){"VAT"==$(this).val()?""!=$("#amount").val()&&$("#input_tax").val(parseFloat($("#amount").val()/1.12*.12).toFixed(2)):$("#input_tax").val(0)}),$(document).on("change","#vat",function(){"VAT"==$(this).val()?""!=$("#amount").val()&&$("#input_tax").val(parseFloat($("#amount").val()/1.12*.12).toFixed(2)):$("#input_tax").val(0)}),$(document).on("change","#company_type_select",function(){n=$(this).val(),p()}),$(document).on("change","#branch_select",function(){a=$(this).val(),p()}),$("#expense_type").select2({allowClear:!0,placeholder:"Select Type",ajax:{url:"/expenseTypeAll",dataType:"json",data:function(e){return{name:e.term,page:e.page}},processResults:function(e){return{results:e.results}}}}),$("#expense_particular").select2({allowClear:!0,placeholder:"Select Particular",ajax:{url:"/expenseParticularAll",dataType:"json",data:function(e){return{name:e.term,page:e.page}},processResults:function(e){return{results:e.results}}}})})}});